<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="generated" content="20260224191852">
<title>XenosFinance â€” MARTEDÃŒ 24 FEBBRAIO 2026</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=IBM+Plex+Sans+Condensed:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#f5f0e8;--ink:#1a1208;--ink2:#3d3020;--muted:#8a7a60;--border:#c8b898;--border2:#e0d4b8;--red:#c0392b;--green:#1a7a3a;--orange:#d35400;--blue:#1a4a8a;--yellow:#f0c040;--mono:'IBM Plex Mono',monospace;--sans:'IBM Plex Sans Condensed',sans-serif;}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:var(--ink);font-family:var(--mono);min-height:100vh;}
.wrap{max-width:1300px;margin:0 auto;padding:0 24px 60px;}
.masthead{border-bottom:4px double var(--ink);padding:28px 0 0;text-align:center;}
.masthead-top{display:flex;justify-content:space-between;align-items:baseline;font-size:10px;color:var(--muted);letter-spacing:1px;margin-bottom:8px;border-bottom:1px solid var(--border);padding-bottom:6px;}
.masthead-name{font-family:var(--sans);font-weight:700;font-size:52px;letter-spacing:-1px;line-height:1;}
.masthead-name span{color:var(--muted);font-weight:300;}
.masthead-sub{font-size:10px;letter-spacing:4px;color:var(--muted);text-transform:uppercase;margin-top:4px;}
.masthead-edition{display:flex;justify-content:space-between;font-size:10px;color:var(--muted);margin-top:8px;border-top:1px solid var(--border);padding-top:6px;}
.main-nav{display:flex;justify-content:center;gap:0;margin-top:0;border-top:2px solid var(--ink);}
.main-nav-btn{font-family:var(--mono);font-size:12px;font-weight:600;letter-spacing:3px;text-transform:uppercase;padding:12px 40px;border:none;background:transparent;color:var(--muted);cursor:pointer;border-bottom:4px solid transparent;transition:all 0.15s;text-decoration:none;display:inline-block;}
.main-nav-btn:hover{color:var(--ink);background:var(--border2);}
.main-nav-btn.active{color:var(--ink);border-bottom:4px solid var(--red);}
.ticker-bar{background:var(--ink);color:var(--bg);padding:6px 0;overflow:hidden;font-size:11px;border-bottom:2px solid var(--ink);}
.ticker-inner{display:flex;gap:32px;white-space:nowrap;animation:scroll-ticker 60s linear infinite;}
.ticker-inner:hover{animation-play-state:paused;}
@keyframes scroll-ticker{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
.tick{display:inline-flex;gap:8px;align-items:center;padding:0 12px;}
.tick-sym{color:#f0c040;font-weight:600;}
.tick-up{color:#5dba72;}.tick-dn{color:#ff6b6b;}.tick-sep{color:#555;}
.newspaper{max-width:1100px;margin:0 auto;padding:20px 0 60px;}
.headline-story{padding:20px 0 16px;border-bottom:2px solid var(--ink);display:grid;grid-template-columns:1fr 1px 380px;gap:0;}
.headline-main{padding-right:24px;}
.headline-divider{background:var(--border);margin:0 20px;}
.kicker{font-family:var(--sans);font-size:10px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--red);margin-bottom:6px;}
.headline-hl{font-family:var(--sans);font-weight:700;font-size:34px;line-height:1.1;margin-bottom:10px;}
.headline-deck{font-size:14px;font-family:var(--sans);color:var(--ink2);line-height:1.5;margin-bottom:12px;border-left:3px solid var(--red);padding-left:12px;}
.byline{font-size:9px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;}
.snapshot-title{font-family:var(--sans);font-weight:700;font-size:11px;letter-spacing:3px;text-transform:uppercase;color:var(--muted);border-bottom:1px solid var(--border);padding-bottom:4px;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;}
.live-badge{font-size:9px;color:var(--green);letter-spacing:1px;}
.snapshot-table{width:100%;font-size:11px;border-collapse:collapse;}
.snapshot-table tr{border-bottom:1px solid var(--border2);}
.snapshot-table td{padding:5px 0;}
.s-sym{font-weight:600;width:90px;}.s-price{text-align:right;color:var(--ink2);}.s-chg{text-align:right;font-weight:600;width:80px;}.s-bar{width:80px;padding-left:8px;}
.mini-bar{height:4px;border-radius:2px;background:#eee;}
.mini-bar-inner{height:4px;border-radius:2px;width:40%;background:var(--muted);transition:all 0.5s;}
.up{color:var(--green);}.dn{color:var(--red);}
.section-head{font-family:var(--sans);font-weight:700;font-size:10px;letter-spacing:4px;text-transform:uppercase;background:var(--ink);color:var(--bg);padding:3px 10px;display:inline-block;margin:20px 0 0;}
.divider-thick{border:none;border-top:2px solid var(--ink);margin:6px 0 16px;}
.main-grid{display:grid;grid-template-columns:1fr 1px 1fr 1px 1fr;gap:0;}
.col-divider{background:var(--border);margin:0 20px;}
.col{padding:16px 0;}
.col-story{margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--border2);}
.col-story:last-child{border-bottom:none;}
.story-kicker{font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-bottom:4px;}
.story-hl{font-family:var(--sans);font-weight:700;font-size:16px;line-height:1.2;margin-bottom:6px;}
.story-body{font-size:11px;color:var(--ink2);line-height:1.7;font-family:var(--sans);}
.story-tag{display:inline-block;margin-top:6px;margin-right:4px;font-size:9px;font-family:var(--mono);letter-spacing:1px;padding:1px 6px;border:1px solid currentColor;}
.tag-bull{color:var(--green);}.tag-bear{color:var(--red);}.tag-neu{color:var(--muted);}
.flash-item{display:grid;grid-template-columns:48px 1fr;gap:8px;padding:8px 0;border-bottom:1px solid var(--border2);font-size:11px;}
.flash-time{color:var(--muted);font-size:10px;}
.flash-hl{font-weight:600;font-family:var(--sans);}
.bottom-bar{border-top:4px double var(--ink);padding:10px 0;display:flex;justify-content:space-between;font-size:10px;color:var(--muted);margin-top:24px;}
.label-band{background:var(--red);color:#fff;font-family:var(--sans);font-weight:700;font-size:9px;letter-spacing:3px;text-transform:uppercase;padding:2px 8px;display:inline-block;margin-bottom:4px;}
a{color:var(--ink);}
</style>
</head>
<body>
<div class="wrap">
<div class="masthead">
  <div class="masthead-top">
    <span>VOL. I â€” EDIZIONE QUOTIDIANA</span>
    <span id="live-date">MARTEDÃŒ 24 FEBBRAIO 2026</span>
    <span id="live-time">AGGIORNATO ALLE 19:18 CET</span>
  </div>
  <div class="masthead-name">XENOS<span>FINANCE</span></div>
  <div class="masthead-sub">Daily Market Intelligence</div>
  <div class="masthead-edition">
    <span>ðŸ“¡ Fonti: BBC Â· Reuters Â· Yahoo Finance Â· EIA</span>
    <span>ðŸ“Š Analisi: Elliott Wave Â· Geopolitics Â· Macro</span>
    <span id="live-date2">MARTEDÃŒ 24 FEBBRAIO 2026 â€” 19:18 CET</span>
  </div>
  <div class="main-nav">
    <a class="main-nav-btn active" href="https://xenosfinance.com">ðŸ“° Daily Brief</a>
    <a class="main-nav-btn" href="https://xenosfinance.com/xenoswaves_charts.html">ðŸ“Š Grafici Interattivi</a>
  </div>
</div>
<div class="ticker-bar">
  <div class="ticker-inner" id="ticker-inner">
    <span class="tick"><span class="tick-sym">CARICAMENTO...</span></span>
    <span class="tick"><span class="tick-sym">CARICAMENTO...</span></span>
  </div>
</div>
<div class="newspaper">
<div class="headline-story">
  <div class="headline-main">
    <div class="label-band">âš¡ TOP STORY</div>
    <div class="headline-hl" id="top-hl"><a id="top-hl-link" href="#" target="_blank" style="color:inherit;text-decoration:none">Caricamento notizie...</a></div>
    <div class="headline-deck" id="top-deck">Connessione ai feed in corso...</div>
    <div style="margin-top:12px" id="top-tags"></div>
    <div class="byline" style="margin-top:8px" id="top-byline"></div>
    <div id="top-extras"></div>
  </div>
  <div class="headline-divider"></div>
  <div>
    <div class="snapshot-title">
      <span>ðŸ“Š Snapshot Mercati</span>
      <span class="live-badge" id="snap-status">âŸ³ aggiornamento...</span>
    </div>
    <table class="snapshot-table" id="snap-table">
      <tr><td class="s-sym">OIL WTI</td><td class="s-price" id="p-OIL">--</td><td class="s-chg" id="c-OIL">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-OIL"></div></div></td></tr>
      <tr><td class="s-sym">GOLD</td><td class="s-price" id="p-GOLD">--</td><td class="s-chg" id="c-GOLD">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-GOLD"></div></div></td></tr>
      <tr><td class="s-sym">EUR/USD</td><td class="s-price" id="p-EURUSD">--</td><td class="s-chg" id="c-EURUSD">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-EURUSD"></div></div></td></tr>
      <tr><td class="s-sym">BTC/USD</td><td class="s-price" id="p-BTCUSD">--</td><td class="s-chg" id="c-BTCUSD">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-BTCUSD"></div></div></td></tr>
      <tr><td class="s-sym">S&P 500</td><td class="s-price" id="p-SPY">--</td><td class="s-chg" id="c-SPY">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-SPY"></div></div></td></tr>
      <tr><td class="s-sym">NASDAQ</td><td class="s-price" id="p-NASDAQ">--</td><td class="s-chg" id="c-NASDAQ">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-NASDAQ"></div></div></td></tr>
      <tr><td class="s-sym">USD/JPY</td><td class="s-price" id="p-USDJPY">--</td><td class="s-chg" id="c-USDJPY">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-USDJPY"></div></div></td></tr>
      <tr><td class="s-sym">NVDA</td><td class="s-price" id="p-NVDA">--</td><td class="s-chg" id="c-NVDA">--</td><td class="s-bar"><div class="mini-bar"><div class="mini-bar-inner" id="b-NVDA"></div></div></td></tr>
    </table>
  </div>
</div>
<div class="section-head">Notizie del Giorno</div>
<hr class="divider-thick">
<div id="news-status" style="font-size:10px;color:var(--muted);margin-bottom:8px;letter-spacing:1px;">âŸ³ Caricamento notizie in corso...</div>
<div class="main-grid" id="news-grid">
  <div class="col" id="news-col1"><div class="col-story"><div class="story-kicker">MERCATI</div><div class="story-hl">Caricamento...</div></div></div>
  <div class="col-divider"></div>
  <div class="col" id="news-col2"><div class="col-story"><div class="story-kicker">ECONOMIA</div><div class="story-hl">Caricamento...</div></div></div>
  <div class="col-divider"></div>
  <div class="col" id="news-col3">
    <div class="story-kicker" style="margin-bottom:8px">âš¡ Flash News</div>
    <div id="news-flash"><div class="flash-item"><div class="flash-time">--:--</div><div class="flash-text"><span class="flash-hl">Caricamento...</span></div></div></div>
  </div>
</div>
<div class="bottom-bar">
  <span>XenosFinance Â· <span id="footer-date">MARTEDÃŒ 24 FEBBRAIO 2026</span></span>
  <span>Fonti: BBC Â· Reuters Â· Yahoo Finance Â· EIA</span>
  <span>âš  Non costituisce consulenza finanziaria</span>
</div>
</div>
</div>
<script>
// â”€â”€ LIVE DATA â€” prezzi e data aggiornati direttamente nel browser â”€â”€
const SYMS = [
  {id:'OIL',   yf:'CL%3DF',    label:'OIL WTI',  dec:2, prefix:'$'},
  {id:'GOLD',  yf:'GC%3DF',    label:'GOLD',     dec:2, prefix:'$'},
  {id:'EURUSD',yf:'EURUSD%3DX',label:'EUR/USD',  dec:4, prefix:''},
  {id:'BTCUSD',yf:'BTC-USD',   label:'BTC/USD',  dec:0, prefix:'$', comma:true},
  {id:'SPY',   yf:'SPY',       label:'S&P 500',  dec:2, prefix:'$'},
  {id:'NASDAQ',yf:'%5EIXIC',   label:'NASDAQ',   dec:0, prefix:'$', comma:true},
  {id:'USDJPY',yf:'USDJPY%3DX',label:'USD/JPY',  dec:4, prefix:''},
  {id:'NVDA',  yf:'NVDA',      label:'NVDA',     dec:2, prefix:'$'},
];
function fmtP(s, p) {
  if (s.comma) return s.prefix + Math.round(p).toLocaleString('en-US');
  return s.prefix + p.toFixed(s.dec);
}
async function fetchSym(s) {
  const yfUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${s.yf}?range=5d&interval=1d`;
  const proxies = [
    `https://api.allorigins.win/raw?url=${encodeURIComponent(yfUrl)}`,
    `https://corsproxy.io/?${encodeURIComponent(yfUrl)}`,
  ];
  for (const url of proxies) {
    try {
      const r = await fetch(url, {signal: AbortSignal.timeout(8000)});
      if (!r.ok) continue;
      const d = await r.json();
      const res = d.chart?.result?.[0];
      if (!res) continue;
      const cls = res.indicators.quote[0].close.filter(x=>x!==null);
      if (cls.length < 2) continue;
      const price = cls[cls.length-1];
      const meta  = res.meta || {};
      const prev  = parseFloat(meta.previousClose || meta.chartPreviousClose || cls[cls.length-2]);
      const chg   = ((price - prev) / prev) * 100;
      return {price, chg};
    } catch(e) { continue; }
  }
  return null;
}
function updateDate() {
  const days   = ['DOMENICA','LUNEDÃŒ','MARTEDÃŒ','MERCOLEDÃŒ','GIOVEDÃŒ','VENERDÃŒ','SABATO'];
  const months = ['GENNAIO','FEBBRAIO','MARZO','APRILE','MAGGIO','GIUGNO','LUGLIO','AGOSTO','SETTEMBRE','OTTOBRE','NOVEMBRE','DICEMBRE'];
  const n = new Date();
  const ds = `${days[n.getDay()]} ${n.getDate()} ${months[n.getMonth()]} ${n.getFullYear()}`;
  const hm = n.getHours().toString().padStart(2,'0') + ':' + n.getMinutes().toString().padStart(2,'0') + ' CET';
  ['live-date','footer-date'].forEach(id => { const el=document.getElementById(id); if(el) el.textContent=ds; });
  const lt = document.getElementById('live-time'); if(lt) lt.textContent = 'LIVE ' + hm;
  const ld2 = document.getElementById('live-date2'); if(ld2) ld2.textContent = ds + ' â€” ' + hm;
}
async function updateAll() {
  updateDate();
  let tickerHtml = '';
  for (const s of SYMS) {
    const data = await fetchSym(s);
    if (!data) continue;
    const up  = data.chg >= 0;
    const ps  = fmtP(s, data.price);
    const cs  = (up?'+':'') + data.chg.toFixed(2) + '%';
    const arr = up ? 'â–²' : 'â–¼';
    // Snapshot table
    const pe = document.getElementById('p-'+s.id); if(pe) pe.textContent = ps;
    const ce = document.getElementById('c-'+s.id);
    if (ce) { ce.textContent = arr+' '+cs; ce.className='s-chg '+(up?'up':'dn'); }
    const be = document.getElementById('b-'+s.id);
    if (be) { const bw=Math.min(Math.abs(data.chg)*20+30,90); be.style.width=bw+'%'; be.style.background=up?'#1a7a3a':'#c0392b'; }
    // Ticker
    tickerHtml += `<span class="tick"><span class="tick-sym">${s.label}</span><span class="${up?'tick-up':'tick-dn'}">${ps}</span><span class="${up?'tick-up':'tick-dn'}">${arr} ${cs}</span></span><span class="tick-sep"> | </span>`;
  }
  if (tickerHtml) {
    const ti = document.getElementById('ticker-inner');
    if (ti) ti.innerHTML = tickerHtml + tickerHtml; // duplicato per loop
  }
  const ss = document.getElementById('snap-status');
  const n = new Date();
  if (ss) ss.textContent = 'âœ“ live ' + n.getHours().toString().padStart(2,'0') + ':' + n.getMinutes().toString().padStart(2,'0');
}
// â”€â”€ LIVE NEWS â€” RSS feed caricati direttamente nel browser â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const NEWS_FEEDS = [
  { url: 'https://feeds.bbci.co.uk/news/business/rss.xml',        source: 'BBC Business',  cat: 'mercati' },
  { url: 'https://feeds.bbci.co.uk/news/world/rss.xml',           source: 'BBC World',     cat: 'geopolitica' },
  { url: 'https://feeds.bbci.co.uk/news/technology/rss.xml',      source: 'BBC Tech',      cat: 'tecnologia' },
  { url: 'https://rss.nytimes.com/services/xml/rss/nyt/Business.xml', source: 'NYT Business', cat: 'mercati' },
  { url: 'https://rss.nytimes.com/services/xml/rss/nyt/Economy.xml',  source: 'NYT Economy',  cat: 'economia' },
];

// Parole chiave per identificare impatto sui mercati
const MARKET_KEYWORDS = {
  bullish_usd:  ['dollar rises','dollar climbs','fed hike','rate rise','strong jobs','gdp beats'],
  bearish_usd:  ['dollar falls','dollar drops','rate cut','fed cut','recession','weak jobs'],
  bullish_gold: ['gold rises','gold climbs','safe haven','inflation surge','war','conflict','sanctions'],
  bearish_gold: ['gold falls','risk on','dollar strong'],
  bullish_oil:  ['oil rises','crude climbs','opec cut','supply cut','iran tension','iraq'],
  bearish_oil:  ['oil falls','crude drops','oversupply','recession fears','demand weak'],
  equity_bull:  ['stocks rise','rally','market gains','earnings beat','tech surges'],
  equity_bear:  ['stocks fall','selloff','market drops','earnings miss','tech plunges','tariff'],
};

function detectImpact(text) {
  const t = text.toLowerCase();
  const tags = [];
  if (MARKET_KEYWORDS.bullish_gold.some(k => t.includes(k))) tags.push({asset:'Gold', dir:'bull'});
  if (MARKET_KEYWORDS.bearish_gold.some(k => t.includes(k))) tags.push({asset:'Gold', dir:'bear'});
  if (MARKET_KEYWORDS.bullish_oil.some(k => t.includes(k)))  tags.push({asset:'Oil', dir:'bull'});
  if (MARKET_KEYWORDS.bearish_oil.some(k => t.includes(k)))  tags.push({asset:'Oil', dir:'bear'});
  if (MARKET_KEYWORDS.equity_bull.some(k => t.includes(k)))  tags.push({asset:'S&P 500', dir:'bull'});
  if (MARKET_KEYWORDS.equity_bear.some(k => t.includes(k)))  tags.push({asset:'S&P 500', dir:'bear'});
  if (MARKET_KEYWORDS.bullish_usd.some(k => t.includes(k)))  tags.push({asset:'USD', dir:'bull'});
  if (MARKET_KEYWORDS.bearish_usd.some(k => t.includes(k)))  tags.push({asset:'USD', dir:'bear'});
  return tags.slice(0, 2);
}

function renderTag(tag) {
  const cls = tag.dir === 'bull' ? 'tag-bull' : 'tag-bear';
  const arr = tag.dir === 'bull' ? 'â–²' : 'â–¼';
  return `<span class="story-tag ${cls}">${arr} ${tag.asset}</span>`;
}

function storyBlock(item) {
  const link  = item.link ? `href="${item.link}" target="_blank"` : '';
  const aO    = link ? `<a ${link} style="color:inherit;text-decoration:none">` : '';
  const aC    = link ? '</a>' : '';
  const body  = item.desc ? `<div class="story-body">${item.desc.substring(0,180)}...</div>` : '';
  const tags  = item.impacts.map(renderTag).join(' ');
  return `<div class="col-story">
    <div class="story-kicker">ðŸ“° ${item.source.toUpperCase()}</div>
    <div class="story-hl">${aO}${item.title}${aC}</div>
    ${body}
    <div style="margin-top:6px">${tags}</div>
  </div>`;
}

async function fetchFeed(feed) {
  const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(feed.url)}`;
  try {
    const r = await fetch(proxyUrl, {signal: AbortSignal.timeout(10000)});
    if (!r.ok) throw new Error('HTTP ' + r.status);
    const txt = await r.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(txt, 'text/xml');
    const items = [];
    for (const el of doc.querySelectorAll('item')) {
      const title = el.querySelector('title')?.textContent?.trim() || '';
      const desc  = (el.querySelector('description')?.textContent || '').replace(/<[^>]+>/g,'').trim();
      const link  = el.querySelector('link')?.textContent?.trim() || '';
      if (!title || title.length < 10) continue;
      const combined = title + ' ' + desc;
      const impacts = detectImpact(combined);
      items.push({ title, desc, link, source: feed.source, cat: feed.cat, impacts });
    }
    return items;
  } catch(e) {
    console.warn('Feed error', feed.source, e.message);
    return [];
  }
}

async function loadLiveNews() {
  const statusEl = document.getElementById('news-status');
  if (statusEl) statusEl.textContent = 'âŸ³ Aggiornamento notizie...';

  // Fetch tutti i feed in parallelo
  const results = await Promise.allSettled(NEWS_FEEDS.map(f => fetchFeed(f)));
  let allItems = [];
  for (const r of results) {
    if (r.status === 'fulfilled') allItems = allItems.concat(r.value);
  }

  if (allItems.length === 0) {
    if (statusEl) statusEl.textContent = 'âš  Feed temporaneamente non disponibili';
    return;
  }

  // PrioritÃ : news con impatto mercati prima, poi le altre
  allItems.sort((a, b) => b.impacts.length - a.impacts.length);

  // Deduplicazione semplice per titolo simile
  const seen = new Set();
  const unique = allItems.filter(item => {
    const key = item.title.substring(0, 40).toLowerCase();
    if (seen.has(key)) return false;
    seen.add(key);
    return true;
  });

  // Top story (headline)
  const top = unique[0];
  if (top) {
    const hlLink = document.getElementById('top-hl-link');
    const deck   = document.getElementById('top-deck');
    const tags   = document.getElementById('top-tags');
    const byline = document.getElementById('top-byline');
    const extras = document.getElementById('top-extras');
    if (hlLink) { hlLink.textContent = top.title; hlLink.href = top.link || '#'; }
    if (deck)   deck.textContent = top.desc ? top.desc.substring(0, 280) + '...' : '';
    if (tags)   tags.innerHTML = top.impacts.map(renderTag).join(' ');
    if (byline) byline.textContent = top.source + ' Â· ' + new Date().toLocaleTimeString('it-IT', {hour:'2-digit',minute:'2-digit'}) + ' CET';
    // Extra stories (story 2 e 3 sotto headline)
    if (extras) {
      extras.innerHTML = unique.slice(1, 3).map(storyBlock).join('');
    }
  }

  // Colonna 1 â€” mercati/economia (storie 3-5)
  const col1El = document.getElementById('news-col1');
  if (col1El) {
    const col1Items = unique.filter(i => ['mercati','economia'].includes(i.cat)).slice(0, 3);
    col1El.innerHTML = col1Items.length > 0
      ? col1Items.map(storyBlock).join('')
      : storyBlock(unique[3] || unique[2]);
  }

  // Colonna 2 â€” geopolitica/world (storie 5-7)
  const col2El = document.getElementById('news-col2');
  if (col2El) {
    const col2Items = unique.filter(i => ['geopolitica','tecnologia'].includes(i.cat)).slice(0, 3);
    col2El.innerHTML = col2Items.length > 0
      ? col2Items.map(storyBlock).join('')
      : storyBlock(unique[5] || unique[4]);
  }

  // Colonna 3 â€” flash news (titoli rapidi)
  const flashEl = document.getElementById('news-flash');
  if (flashEl) {
    const flashItems = unique.slice(6, 12);
    const now = new Date();
    const hm  = now.getHours().toString().padStart(2,'0') + ':' + now.getMinutes().toString().padStart(2,'0');
    flashEl.innerHTML = flashItems.map(item =>
      `<div class="flash-item">
        <div class="flash-time">${hm}</div>
        <div class="flash-text">
          <span class="flash-hl">
            ${item.link ? `<a href="${item.link}" target="_blank" style="color:inherit;text-decoration:none">` : ''}
            ${item.title.substring(0, 90)}
            ${item.link ? '</a>' : ''}
          </span>
          <div style="margin-top:2px">${item.impacts.map(renderTag).join(' ')}</div>
        </div>
      </div>`
    ).join('');
  }

  const n = new Date();
  const hm2 = n.getHours().toString().padStart(2,'0') + ':' + n.getMinutes().toString().padStart(2,'0');
  if (statusEl) statusEl.textContent = `âœ“ ${unique.length} notizie Â· aggiornato ${hm2} CET Â· prossimo refresh 5 min`;
}

// Avvio e refresh ogni 5 minuti
document.addEventListener('DOMContentLoaded', () => {
  updateAll();
  loadLiveNews();
  setInterval(updateAll, 60000);
  setInterval(loadLiveNews, 300000);
});
</script>
</body>
</html>